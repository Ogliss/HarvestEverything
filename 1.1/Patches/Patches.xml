<?xml version="1.0" encoding="utf-8" ?>
<Patch>
  <Operation Class="PatchOperationSequence">
    <success>Always</success>
    <operations>
      <li Class="PatchOperationTest">
        <xpath>/Defs/BodyPartDef[defName="Stomach"]/spawnThingOnRemoved</xpath>
        <success>Invert</success>
      </li>
      <li Class="PatchOperationAdd">
        <xpath>/Defs/BodyPartDef[defName="Stomach"]</xpath>
        <value>
          <spawnThingOnRemoved>Stomach</spawnThingOnRemoved>
          <modExtensions>
            <li Class="Harvest_Everything.ModExtension">
              <requireCleanChildrenToRemove>true</requireCleanChildrenToRemove>
            </li>
          </modExtensions>

        </value>
      </li>
    </operations>
  </Operation>

  <Operation Class="PatchOperationSequence">
    <success>Always</success>
    <operations>
      <li Class="PatchOperationTest">
        <xpath>/Defs/BodyPartDef[defName="Eye"]/spawnThingOnRemoved</xpath>
        <success>Invert</success>
      </li>
      <li Class="PatchOperationAdd">
        <xpath>/Defs/BodyPartDef[defName="Eye"]</xpath>
        <value>
          <spawnThingOnRemoved>Eye</spawnThingOnRemoved>
          <modExtensions>
            <li Class="Harvest_Everything.ModExtension">
              <requireCleanChildrenToRemove>true</requireCleanChildrenToRemove>
            </li>
          </modExtensions>

        </value>
      </li>
    </operations>
  </Operation>

  <Operation Class="PatchOperationSequence">
    <success>Always</success>
    <operations>
      <li Class="PatchOperationTest">
        <xpath>/Defs/BodyPartDef[defName="Ear"]/spawnThingOnRemoved</xpath>
        <success>Invert</success>
      </li>
      <li Class="PatchOperationAdd">
        <xpath>/Defs/BodyPartDef[defName="Ear"]</xpath>
        <value>
          <spawnThingOnRemoved>Ear</spawnThingOnRemoved>
          <modExtensions>
            <li Class="Harvest_Everything.ModExtension">
              <requireCleanChildrenToRemove>true</requireCleanChildrenToRemove>
            </li>
          </modExtensions>

        </value>
      </li>
    </operations>
  </Operation>

  <Operation Class="PatchOperationSequence">
    <success>Always</success>
    <operations>
      <li Class="PatchOperationTest">
        <xpath>/Defs/BodyPartDef[defName="Brain"]/spawnThingOnRemoved</xpath>
        <success>Invert</success>
      </li>
      <li Class="PatchOperationAdd">
        <xpath>/Defs/BodyPartDef[defName="Brain"]</xpath>
        <value>
          <spawnThingOnRemoved>Brain</spawnThingOnRemoved>
          <modExtensions>
            <li Class="Harvest_Everything.ModExtension">
              <requireCleanChildrenToRemove>true</requireCleanChildrenToRemove>
            </li>
          </modExtensions>

        </value>
      </li>
    </operations>
  </Operation>

  <Operation Class="PatchOperationSequence">
    <success>Always</success>
    <operations>
      <li Class="PatchOperationTest">
        <xpath>/Defs/BodyPartDef[defName="Nose"]/spawnThingOnRemoved</xpath>
        <success>Invert</success>
      </li>
      <li Class="PatchOperationAdd">
        <xpath>/Defs/BodyPartDef[defName="Nose"]</xpath>
        <value>
          <spawnThingOnRemoved>Nose</spawnThingOnRemoved>
          <modExtensions>
            <li Class="Harvest_Everything.ModExtension">
              <requireCleanChildrenToRemove>true</requireCleanChildrenToRemove>
            </li>
          </modExtensions>

        </value>
      </li>
    </operations>
  </Operation>

  <Operation Class="PatchOperationSequence">
    <success>Always</success>
    <operations>
      <li Class="PatchOperationTest">
        <xpath>/Defs/BodyPartDef[defName="Jaw"]/spawnThingOnRemoved</xpath>
        <success>Invert</success>
      </li>
      <li Class="PatchOperationAdd">
        <xpath>/Defs/BodyPartDef[defName="Jaw"]</xpath>
        <value>
          <spawnThingOnRemoved>Jaw</spawnThingOnRemoved>
          <modExtensions>
            <li Class="Harvest_Everything.ModExtension">
              <requireCleanChildrenToRemove>true</requireCleanChildrenToRemove>
            </li>
          </modExtensions>

        </value>
      </li>
    </operations>
  </Operation>

  <Operation Class="PatchOperationSequence">
    <success>Always</success>
    <operations>
      <li Class="PatchOperationTest">
        <xpath>/Defs/BodyPartDef[defName="Shoulder"]/spawnThingOnRemoved</xpath>
        <success>Invert</success>
      </li>
      <li Class="PatchOperationAdd">
        <xpath>/Defs/BodyPartDef[defName="Shoulder"]</xpath>
        <value>
          <spawnThingOnRemoved>Arm</spawnThingOnRemoved>
          <modExtensions>
            <li Class="Harvest_Everything.ModExtension">
              <requireCleanChildrenToRemove>true</requireCleanChildrenToRemove>
            </li>
          </modExtensions>

        </value>
      </li>
    </operations>
  </Operation>

  <Operation Class="PatchOperationSequence">
    <success>Always</success>
    <operations>
      <li Class="PatchOperationTest">
        <xpath>/Defs/BodyPartDef[defName="Hand"]/spawnThingOnRemoved</xpath>
        <success>Invert</success>
      </li>
      <li Class="PatchOperationAdd">
        <xpath>/Defs/BodyPartDef[defName="Hand"]</xpath>
        <value>
          <spawnThingOnRemoved>Hand</spawnThingOnRemoved>
          <modExtensions>
            <li Class="Harvest_Everything.ModExtension">
              <requireCleanChildrenToRemove>true</requireCleanChildrenToRemove>
            </li>
          </modExtensions>

        </value>
      </li>
    </operations>
  </Operation>

  <Operation Class="PatchOperationSequence">
    <success>Always</success>
    <operations>
      <li Class="PatchOperationTest">
        <xpath>/Defs/BodyPartDef[defName="Leg"]/spawnThingOnRemoved</xpath>
        <success>Invert</success>
      </li>
      <li Class="PatchOperationAdd">
        <xpath>/Defs/BodyPartDef[defName="Leg"]</xpath>
        <value>
          <spawnThingOnRemoved>Leg</spawnThingOnRemoved>
          <modExtensions>
            <li Class="Harvest_Everything.ModExtension">
              <requireCleanChildrenToRemove>true</requireCleanChildrenToRemove>
            </li>
          </modExtensions>

        </value>
      </li>
    </operations>
  </Operation>

  <Operation Class="PatchOperationSequence">
    <success>Always</success>
    <operations>
      <li Class="PatchOperationTest">
        <xpath>/Defs/BodyPartDef[defName="Foot"]/spawnThingOnRemoved</xpath>
        <success>Invert</success>
      </li>
      <li Class="PatchOperationAdd">
        <xpath>/Defs/BodyPartDef[defName="Foot"]</xpath>
        <value>
          <spawnThingOnRemoved>Foot</spawnThingOnRemoved>
          <modExtensions>
            <li Class="Harvest_Everything.ModExtension">
              <requireCleanChildrenToRemove>true</requireCleanChildrenToRemove>
            </li>
          </modExtensions>

        </value>
      </li>
    </operations>
  </Operation>

  <!--Rimworld Extented Body Simulation Compatibility -->

  <Operation Class="PatchOperationSequence">
    <success>Always</success>
    <operations>
      <li Class="PatchOperationTest">
        <xpath>/Defs/BodyPartDef[defName="Patella"]/spawnThingOnRemoved</xpath>
        <success>Invert</success>
      </li>
      <li Class="PatchOperationAdd">
        <xpath>/Defs/BodyPartDef[defName="Patella"]</xpath>
        <value>
          <spawnThingOnRemoved>Patella</spawnThingOnRemoved>
          <modExtensions>
            <li Class="Harvest_Everything.ModExtension">
              <requireCleanChildrenToRemove>true</requireCleanChildrenToRemove>
            </li>
          </modExtensions>

        </value>
      </li>
      <li Class="PatchOperationAdd">
        <xpath>/Defs/BodyPartDef[defName="Fibula"]</xpath>
        <value>
          <spawnThingOnRemoved>Fibula</spawnThingOnRemoved>
          <modExtensions>
            <li Class="Harvest_Everything.ModExtension">
              <requireCleanChildrenToRemove>true</requireCleanChildrenToRemove>
            </li>
          </modExtensions>

        </value>
      </li>
      <li Class="PatchOperationAdd">
        <xpath>/Defs/BodyPartDef[defName="Ulna"]</xpath>
        <value>
          <spawnThingOnRemoved>Ulna</spawnThingOnRemoved>
          <modExtensions>
            <li Class="Harvest_Everything.ModExtension">
              <requireCleanChildrenToRemove>true</requireCleanChildrenToRemove>
            </li>
          </modExtensions>

        </value>
      </li>
      <li Class="PatchOperationAdd">
        <xpath>/Defs/BodyPartDef[defName="LobeLiver"]</xpath>
        <value>
          <spawnThingOnRemoved>LobeLiver</spawnThingOnRemoved>
          <modExtensions>
            <li Class="Harvest_Everything.ModExtension">
              <requireCleanChildrenToRemove>true</requireCleanChildrenToRemove>
            </li>
          </modExtensions>

        </value>
      </li>
      <li Class="PatchOperationAdd">
        <xpath>/Defs/BodyPartDef[defName="Spleen"]</xpath>
        <value>
          <spawnThingOnRemoved>Spleen</spawnThingOnRemoved>
          <modExtensions>
            <li Class="Harvest_Everything.ModExtension">
              <requireCleanChildrenToRemove>true</requireCleanChildrenToRemove>
            </li>
          </modExtensions>
        </value>
      </li>
    </operations>
  </Operation>

   	<Operation Class="PatchOperationFindMod">
		<mods>
			<li>The Birds and the Bees</li>
		</mods>
		<match Class="PatchOperationSequence">
			<!--<success>Always</success>-->
			<operations>
			
				<li Class="PatchOperationAdd">
					<xpath>/Defs</xpath>
					<value>
					
						<ThingDef ParentName="BodyPartNaturalBase">
							<defName>ReproductiveOrgans</defName>
							<label>reproductive organs</label>
							<description>Biological human reproductive organs. Useful for procreation and recreation , surprisingly interchangeable.</description>
							<statBases>
								<MarketValue>300</MarketValue>
								<Mass>0.4</Mass>
							</statBases>
						</ThingDef>
					
						<RecipeDef ParentName="SurgeryInstallOrgan">
							<defName>InstallNaturalReproductiveOrgans</defName>
							<label>install reproductive organs</label>
							<description>Install biological reproductive organs.</description>
							<jobString>Installing reproductive organs.</jobString>
							<ingredients>
							  <li>
								<filter>
								  <categories>
									<li>Medicine</li>
								  </categories>
								</filter>
								<count>2</count>
							  </li>
							  <li>
								<filter>
								  <thingDefs>
									<li>ReproductiveOrgans</li>
								  </thingDefs>
								</filter>
								<count>1</count>
							  </li>
							</ingredients>
							<fixedIngredientFilter>
							  <categories>
								<li>Medicine</li>
							  </categories>
							  <thingDefs>
								<li>ReproductiveOrgans</li>
							  </thingDefs>
							</fixedIngredientFilter>
							<appliedOnFixedBodyParts>
							  <li>ReproductiveOrgans</li>
							</appliedOnFixedBodyParts>
						</RecipeDef>

					</value>
				</li>

				<li Class="PatchOperationTest">
					<xpath>/Defs/BodyPartDef[defName="ReproductiveOrgans"]/spawnThingOnRemoved</xpath>
					<success>Invert</success>
				</li>
				
				<li Class="PatchOperationAdd">
					<xpath>/Defs/BodyPartDef[defName="ReproductiveOrgans"]</xpath>
					<value>
						<spawnThingOnRemoved>ReproductiveOrgans</spawnThingOnRemoved>
					</value>
				</li>
			</operations>
		</match>
		<nomatch Class="PatchOperationSequence">
			<success>Always</success>
			<operations>
			
			</operations>
		</nomatch>	
	</Operation>

</Patch>

